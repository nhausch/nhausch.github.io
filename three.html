<script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
<body>
  <div id="three-js-sandbox">
    <ul id="nav">
      <li><a href="index.html">About</a></li>
      <li><a href="clusters.html">Clustering Visualizer</a></li>
      <li><a href="#">Three JS Sandbox</a></li>
    </ul>
  </div>
  <p id="about"> 
    <b id="name">Generating Shapes</b>
    <br/><br/>
    Three JS is a javascript graphics library based on WebGL. The goal here is to render shapes based on some variable input. Currently WIP.
  </p>
  <canvas id="c"></canvas>

  <script type="module">

    // Imports
    "use strict";   
    import * as THREE from 'https://threejsfundamentals.org/threejs/resources/threejs/r132/build/three.module.js';

    // Setup Three
    const canvas = document.querySelector('#c');
    const scene = new THREE.Scene();
		const camera = new THREE.PerspectiveCamera( 100, window.innerWidth / window.innerHeight, 0.1, 100 );
    camera.position.set(0, 20, 0);
    camera.lookAt(new THREE.Vector3(0, 0, 0));
		const renderer = new THREE.WebGLRenderer({canvas});
    const canvas_width = 800;
    const canvas_height = 500;
    renderer.setSize(canvas_width, canvas_height);

   /* * * * * * * * * *  
    * ThreeJS Classes *
    * * * * * * * * * */
    // Wireframe Cubes
    class WireframeCubes {
      constructor(height, width, spacing, zoom_speed) {
        this.height = height;
        this.width = width;
        this.spaceing = spacing;
        this.zoom_speed = zoom_speed;
        this.cubes = [];
      }

      render() {

        // Init geometries and materials
        const geometry = new THREE.BoxGeometry();
        const material = new THREE.MeshBasicMaterial( { color: 0xcce6ff, opacity: 0.7, transparent: true } );
        var mat = new THREE.LineBasicMaterial( { color: 0xffffff, linewidth: 2 } );

        // Create the array of cubes
        for (let i = -9; i < 10; i++) {
          for (let j = -9; j < 10; j++) {
            var geo = new THREE.EdgesGeometry( geometry );
            var wireframe = new THREE.LineSegments( geo, mat );
            wireframe.position.x = i * 2;
            wireframe.position.z = j * 2;
            wireframe.position.y = 0;
            this.cubes.push(wireframe);
            scene.add(wireframe);
          }
        }
      }

      animationStep() {

        // zoom in
        let y = camera.position.y;
        camera.position.set(0, y - 0.1, 0);
        var should_reset = camera.position.y < -1.0;
        return should_reset;
      }

      reset() {
        camera.position.set(0, 20, 0);
      }
    }

    // Declare
    let cubes = new WireframeCubes(0, 0, 0, 0);
    cubes.render();

    // Render the scene
    let current_animation_finished = false;
    const animate = function () {
      requestAnimationFrame( animate );
      current_animation_finished = cubes.animationStep();
      if (current_animation_finished) { cubes.reset(); }
      renderer.render(scene, camera);
    };
    animate();

  </script>
</body>

<style>
  #three-js-sandbox {
    font-family: Courier;
  }
  #nav {
    list-style-type: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #f3f3f3;
    border: 1px solid #e7e7e7;
  }
  li {
    float: left;
  }
  li a {
    display: block;
    color: #666;
    padding: 8px 16px;
    text-decoration: none;
  }
  li a:hover {
    background-color: #555;
    color: white;
  }

  #c {
    position: relative;
    left: 50;
    top: 50;
    display: block;
    z-index: -1;
  }

  #about {
    color: #323232;
    background-color: #D9E3E4;
    border: 20px solid #D9E3E4;
    font-family: Courier;
    max-width: 800px;
  }

  #name {
    font-size: 20px;
  }
</style>
